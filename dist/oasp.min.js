angular.module("oasp",["oasp.oaspUi","oasp.oaspSecurity","oasp.oaspI18n"]),angular.module("oasp.oaspSecurity",[]).config(["$httpProvider",function(a){"use strict";a.interceptors.push("oaspSecurityInterceptor")}]).run(["oaspSecurityService",function(a){"use strict";a.checkIfUserIsLoggedInAndIfSoReinitializeAppContext()}]),angular.module("oasp.oaspSecurity").factory("oaspSecurityInterceptor",["$q","oaspUnauthenticatedRequestResender",function(a,b){"use strict";return{responseError:function(c){var d;return 403===c.status?(d=c.config,b.addRequest(d)):a.reject(c)}}}]),angular.module("oasp.oaspSecurity").provider("oaspSecurityService",function(){"use strict";var a={securityRestServiceName:"securityRestService",appContextServiceName:"appContext"};return{setSecurityRestServiceName:function(b){a.securityRestServiceName=b||a.securityRestServiceName},setAppContextServiceName:function(b){a.appContextServiceName=b||a.appContextServiceName},$get:["$injector","$http","$q",function(b,c,d){var e={set:function(a,b){this.headerName=a,this.token=b},invalidate:function(){this.headerName=void 0,this.token=void 0}},f=function(){return{hasToken:function(){return e.headerName&&e.token?!0:!1},getHeaderName:function(){return e.headerName},getToken:function(){return e.token}}}(),g=function(){var a,b,c=!1;return{initializationStarts:function(){c=!0,b=d.defer()},initializationSucceeded:function(d){a=d,c=!1,b.resolve(a),b=void 0},initializationFailed:function(){a=void 0,c=!1,b.resolve(a),b=void 0},userLoggedOff:function(){a=void 0},getProfile:function(){return c?b.promise:d.when(a)}}}(),h=function(){return b.get(a.securityRestServiceName)},i=function(){return b.get(a.appContextServiceName)},j=function(){return h().getCsrfToken().then(function(a){var b=a.data;return c.defaults.headers.common[b.headerName]=b.token,e.set(b.headerName,b.token),b},function(){return d.reject("Requesting a CSRF token failed")})};return{logIn:function(a,b){var c=d.defer();return g.initializationStarts(),h().login(a,b).then(function(){d.all([h().getCurrentUser(),j()]).then(function(a){var b=a[0].data;g.initializationSucceeded(b),i().onLoggingIn(b),c.resolve()},function(a){g.initializationFailed(),c.reject(a)})},function(){g.initializationFailed(),c.reject("Authentication failed")}),c.promise},logOff:function(){return h().logout().then(function(){e.invalidate(),g.userLoggedOff(),i().onLoggingOff()})},checkIfUserIsLoggedInAndIfSoReinitializeAppContext:function(){g.initializationStarts(),h().getCurrentUser().then(function(a){var b=a.data;j().then(function(){g.initializationSucceeded(b),i().onLoggingIn(b)},function(){g.initializationFailed()})},function(){g.initializationFailed()})},getCurrentCsrfToken:function(){return f},getCurrentUserProfile:function(){return g.getProfile()}}}]}}),angular.module("oasp.oaspSecurity").provider("oaspUnauthenticatedRequestResender",function(){"use strict";var a={authenticatorServiceName:"authenticator"};return{setAuthenticatorServiceName:function(b){a.authenticatorServiceName=b||a.authenticatorServiceName},$get:["$q","$injector",function(b,c){var d={queue:[],push:function(a){this.queue.push(a)},resendAll:function(a){for(;this.queue.length;)this.queue.shift().resend(a)},cancelAll:function(){for(;this.queue.length;)this.queue.shift().cancel()}},e=function(){return c.get("oaspSecurityService")},f=function(){return c.get(a.authenticatorServiceName)},g=function(){var a=!0;return function(b,c){a&&(f().execute().then(function(){b(),a=!0},function(){c(),a=!0}),a=!1)}}();return{addRequest:function(a){var f=b.defer(),h={resend:function(b){var d=function(a,b){var d=c.get("$http");return a.headers[b.headerName]=b.token,d(a)};d(a,b).then(function(a){f.resolve(a)},function(a){f.reject(a)})},cancel:function(){f.reject()}},i=function(){var a=e().getCurrentCsrfToken();d.resendAll({headerName:a.getHeaderName(),token:a.getToken()})},j=function(){d.cancelAll()};return d.push(h),g(i,j),f.promise}}}]}}),angular.module("oasp.oaspUi.buttonBar",["oasp.oaspUi.templates"]),angular.module("oasp.oaspUi.modal",["oasp.oaspUi.spinner","ui.bootstrap.modal","oasp.oaspUi.templates"]),angular.module("oasp.oaspUi.oaspGrid",["oasp.oaspUi.templates","trNgGrid"]).run(function(){"use strict";TrNgGrid.tableCssClass="tr-ng-grid table table-striped"}),angular.module("oasp.oaspUi",["oasp.oaspUi.oaspGrid","oasp.oaspUi.spinner","oasp.oaspUi.modal","oasp.oaspUi.buttonBar"]),angular.module("oasp.oaspUi.spinner",["angularSpinner","oasp.oaspUi.templates"]),angular.module("oasp.oaspUi.buttonBar").directive("buttonBar",function(){"use strict";return{restrict:"EA",replace:!0,templateUrl:"oasp-ui/html/button-bar/button-bar.html",scope:{buttonDefs:"="},link:function(a){a.onButtonClick=function(a){a&&angular.isFunction(a.onClick)&&a.onClick.apply(void 0,arguments)},a.isButtonDisabled=function(a){return a&&angular.isFunction(a.isActive)?!a.isActive.apply(void 0,arguments):a&&angular.isFunction(a.isNotActive)?a.isNotActive.apply(void 0,arguments):!0}}}}),angular.module("oasp.oaspUi.modal").constant("oaspUiModalDefaults",{backdrop:"static",keyboard:!1}).config(["$provide","oaspUiModalDefaults",function(a,b){"use strict";var c=["$delegate","globalSpinner",function(a,c){return{open:function(d){c.show();var e=a.open(angular.extend({},b,d));return e.opened.then(function(){c.hide()},function(){c.hide()}),e}}}];a.decorator("$modal",c)}]),angular.module("oasp.oaspUi.spinner").factory("globalSpinner",["$rootScope","$q",function(a,b){"use strict";var c={};return c.show=function(){a.globalSpinner=!0},c.hide=function(){a.globalSpinner=!1},c.showOnRouteChangeStartAndHideWhenComplete=function(){a.$on("$routeChangeStart",function(a,b){b.resolve&&c.show()}),a.$on("$routeChangeSuccess",function(){c.hide()}),a.$on("$routeChangeError",function(){c.hide()})},c.decorateCallOfFunctionReturningPromise=function(a){return c.show(),a().then(function(a){return c.hide(),a},function(a){return c.hide(),b.reject(a)})},c}]),angular.module("oasp.oaspUi.spinner").constant("spinnerOptions",{lines:13,length:20,width:4,radius:16,corners:1,rotate:0,color:"#ffffff",speed:1.2,trail:54,shadow:!1,hwaccel:!1,zIndex:2e9}).directive("spinner",["spinnerOptions",function(a){"use strict";return{restrict:"A",replace:!0,templateUrl:"oasp-ui/html/spinner/spinner.html",scope:{spinnerVisible:"=spinner"},link:function(b){b.spinnerOptions=a}}}]),angular.module("oasp.oaspUi.templates",[]).run(["$templateCache",function(a){a.put("oasp-ui/html/button-bar/button-bar.html",'<div class="btn-group btn-group-sm" role="group">\n    <button data-ng-repeat="buttonDef in buttonDefs"\n            data-ng-click="onButtonClick(buttonDef)"\n            data-ng-disabled="isButtonDisabled(buttonDef)"\n            class="btn btn-sm btn-default">\n        <span data-ng-bind="buttonDef.label"></span>\n    </button>\n</div>\n'),a.put("oasp-ui/html/spinner/spinner.html",'<div class="spinner-container" data-ng-show="spinnerVisible">\n    <div class="spinner-backdrop"></div>\n    <span us-spinner="spinnerOptions"\n          data-spinner-start-active="1"></span>\n</div>')}]),angular.module("oasp.oaspI18n",["pascalprecht.translate","oasp.oaspI18n.templates"],["$translateProvider","$httpProvider",function(a,b){"use strict";b.interceptors.push("templateLoadTranslationInterceptor"),a.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/locale-{lang}.json"})}]).run(["$rootScope","$translate","$translatePartialLoader",function(a,b,c){"use strict";var d=function(a){c.addPart(a),b.refresh()};a.$on("translationPartChange",function(a,b){d(b,a)})}]),angular.module("oasp.oaspI18n").controller("LanguageChangeCntl",["$scope","$translate","oaspTranslation",function(a,b,c){"use strict";a.supportedLanguages=c.getSupportedLanguages(),a.changeLanguage=function(a){b.use(a)},a.getCurrentLanguage=function(){return b.use()}}]),angular.module("oasp.oaspI18n").directive("languageChange",function(){"use strict";return{restrict:"EA",scope:!0,replace:!0,controller:"LanguageChangeCntl",templateUrl:"oasp-i18n/html/language-change.html"}}),angular.module("oasp.oaspI18n").provider("oaspTranslation",["$translatePartialLoaderProvider","$translateProvider",function(a,b){"use strict";var c,d=[],e=[],f=function(){var a,b;if(e&&e.length)for(b=e[0],a=0;a<e.length;a+=1)e[a]["default"]===!0&&(b=e[a]);return b};this.enableTranslationForModule=function(b,e){if(d.indexOf(b)<0&&d.push(b),e===!0){if(c)throw new Error("Default module already specified defaultModule="+c);c=b,a.addPart(c)}},this.setSupportedLanguages=function(a){if(e&&e.length)throw new Error("Supported languages already specified");e=a,f()&&b.preferredLanguage(f().key)},this.$get=[function(){return{moduleHasTranslations:function(a){return d.indexOf(a)>-1},getDefaultTranslationModule:function(){return c},getSupportedLanguages:function(){return e},getDefaultLanguage:f}}]}]),angular.module("oasp.oaspI18n").service("templateLoadTranslationInterceptor",["$rootScope","oaspTranslation",function(a,b){"use strict";var c=new RegExp("/?([^/]+)/html/");return{request:function(d){if(d.url){var e=c.exec(d.url);e&&e.length>1&&b.moduleHasTranslations(e[1])&&a.$emit("translationPartChange",e[1])}return d}}}]),angular.module("oasp.oaspI18n.templates",[]).run(["$templateCache",function(a){a.put("oasp-i18n/html/language-change.html",'<li class="dropdown language-dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="icon-container"><span\n            class="icon icon-{{getCurrentLanguage()}}-24"></span></span><span translate="">OASP.LANGUAGE</span><span\n            class="caret"></span>\n    </a>\n    <ul class="dropdown-menu" role="menu">\n        <li ng-repeat="lang in supportedLanguages" ng-show="getCurrentLanguage()!=lang.key">\n            <a dropdown-toggle="" ng-click="changeLanguage(lang.key)">\n                <span class="icon icon-{{lang.key}}-24"></span>{{lang.label}}\n            </a>\n        </li>\n    </ul>\n</li>')}]);